-- ============================================================================
-- Migration: 20251024_010_phase5_seed_data
-- Description: Phase 5 - Seed data for reward_definitions
-- Dependencies: reward_definitions table
-- ============================================================================

-- ============================================================================
-- reward_definitions 시드 데이터
-- ============================================================================

INSERT INTO reward_definitions (reward_type, name, description, icon, color, trigger_event)
VALUES
  -- 목표 관련
  ('badge', '첫 목표 설정', '처음으로 목표를 설정했어요!', '🎯', '#3B82F6', 'first_goal'),
  ('badge', '목표 달성자', '목표를 완벽하게 달성했어요!', '🏆', '#FFD700', 'goal_completed'),

  -- 만다라트 관련
  ('badge', '만다라트 마스터', '처음으로 만다라트를 작성했어요!', '🗂️', '#8B5CF6', 'first_mandala'),

  -- 약점 관리 관련
  ('badge', '약점 정복자', '약점을 극복했어요!', '💪', '#10B981', 'weakness_resolved'),
  ('badge', '재도전 영웅', '다시 도전해서 성공했어요!', '🔁', '#F59E0B', 'retry_success'),

  -- 연속 달성 (Streak)
  ('sticker', '3일 연속 달성', '3일 연속으로 목표를 달성했어요!', '🔥', '#EF4444', 'streak_3'),
  ('sticker', '7일 연속 달성', '일주일 내내 완벽해요!', '⭐', '#F59E0B', 'streak_7'),
  ('badge', '2주 연속 마스터', '2주 연속 완벽! 정말 대단해요!', '👑', '#FFD700', 'streak_14'),

  -- 완벽한 주
  ('achievement', '완벽한 주', '이번 주 모든 습관을 완수했어요!', '✨', '#EC4899', 'perfect_week')
ON CONFLICT (name) DO NOTHING;

-- ============================================================================
-- 확인용 쿼리
-- ============================================================================

-- 시드 데이터 확인
-- SELECT name, reward_type, trigger_event FROM reward_definitions ORDER BY created_at;

-- ============================================================================
-- Migration Notes
-- ============================================================================
-- 1. 9개 보상 정의 추가 (배지 6개, 스티커 2개, 업적 1개)
-- 2. ON CONFLICT DO NOTHING으로 중복 방지
-- 3. 이벤트 발생 시 자동으로 rewards_ledger에 지급됨
-- ============================================================================

-- ============================================================================
-- 다음 단계 (프론트엔드)
-- ============================================================================
-- 1. 보상 알림 UI 구현
-- 2. progress_events 자동 생성 로직
-- 3. rewards_ledger 자동 지급 트리거
-- 4. 보상 목록 페이지
-- ============================================================================
